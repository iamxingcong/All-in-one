<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>表单序列化Demo</title>
    <link rel="stylesheet" href="../../static/module/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../static/module/artDialog/css/ui-dialog.css">
    <link rel="stylesheet" href="../../static/css/public.css">
    <link rel="stylesheet" href="../../static/css/t_public.css">
    <style>
        .margin-left-15 {
            margin-left: 15px !important;
        }

        .padding-top-0 {
            padding-top: 0 !important;
        }
    </style>
</head>
<body>

<div class="content">
    <div class="table">
        <div class="panel panel-default">
            <div class="panel-heading">
                <!--<h3 class="panel-title">查询条件</h3>-->
                <div class="pull-left">
                    <button class="btn btn-info" id="showDialogBtn">呼出Dialog</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="content">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">H5 type属性</h3>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-3">
                    <div class="input-group">
                        <span class="input-group-addon">button</span>
                        <input type="button" name="button_H5">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="input-group">
                        <span class="input-group-addon">color</span>
                        <input type="color" name="color_H5">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="input-group">
                        <span class="input-group-addon">date</span>
                        <input type="date" name="date_H5">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="content">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">checkbox单选,模拟radio</h3>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-12">
                    <div class="input-group">
                        <span class="input-group-addon">日常</span>
                        <div class="form-control form-inline">
                            <div class="checkbox margin-left-15 padding-top-0">
                                <label>
                                    <input type="checkbox" name="workDaily" value="1"> 吃饭
                                </label>
                            </div>
                            <div class="checkbox margin-left-15 padding-top-0">
                                <label>
                                    <input type="checkbox" name="workDaily" value="2"> 睡觉
                                </label>
                            </div>
                            <div class="checkbox margin-left-15 padding-top-0">
                                <label>
                                    <input type="checkbox" name="workDaily" value="3"> 打豆豆
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--弹出的dialog,begin-->
<div id="dialog" style="display: none;">
    <div class="content">
        <div class="table">
            <div class="panel panel-default">
                <div class="panel-body">
                    <form id="form">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="input-group">
                                    <span class="input-group-addon">名称</span>
                                    <input type="text" class="form-control" name="name">
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="input-group">
                                    <span class="input-group-addon">名称</span>
                                    <input type="text" class="form-control" name="name">
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="input-group">
                                    <span class="input-group-addon">性别</span>
                                    <select class="form-control" name="sex">
                                        <option value="0">请选择</option>
                                        <option value="1">男</option>
                                        <option value="2">女</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="input-group">
                                    <span class="input-group-addon">介绍</span>
                                    <textarea cols="30" rows="3" style="min-height: 34px" class="form-control"
                                              name="introduce"></textarea>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="input-group">
                                    <span class="input-group-addon">日常</span>
                                    <div class="form-control form-inline">
                                        <div class="checkbox margin-left-15 padding-top-0">
                                            <label>
                                                <input type="checkbox" name="daily" value="1"> 吃饭
                                            </label>
                                        </div>
                                        <div class="checkbox margin-left-15 padding-top-0">
                                            <label>
                                                <input type="checkbox" name="daily" value="2"> 睡觉
                                            </label>
                                        </div>
                                        <div class="checkbox margin-left-15 padding-top-0">
                                            <label>
                                                <input type="checkbox" name="daily" value="3"> 打豆豆
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="input-group">
                                    <span class="input-group-addon">技能</span>
                                    <div class="form-control form-inline">
                                        <div class="checkbox margin-left-15 padding-top-0">
                                            <label>
                                                <input type="radio" name="skill" value="1"> java
                                            </label>
                                        </div>
                                        <div class="checkbox margin-left-15 padding-top-0">
                                            <label>
                                                <input type="radio" name="skill" value="2"> c
                                            </label>
                                        </div>
                                        <div class="checkbox margin-left-15 padding-top-0">
                                            <label>
                                                <input type="radio" name="skill" value="3"> c#
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="input-group">
                                    <span class="input-group-addon">非表单元素</span>
                                    <div name="statictxt" class="static-form"></div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!--弹出的dialog,end-->
</body>
<script src="../../static/js/jquery-2.1.4.min.js"></script>
<script src="../../static/module/bootstrap/js/bootstrap.min.js"></script>
<script src="../../static/module/My97DatePicker/WdatePicker.js"></script>
<script src="../../static/js/configUtils.js"></script>
<script src="../../static/module/XGrid/XGrid.js"></script>
<script src="../../static/module/artDialog/dist/dialog-plus-min.js"></script>
<script src="../../static/js/t_utils.js"></script>
<script>
    $(function () {

        var gotSerializeObj;

        $("#showDialogBtn").on('click', function () {
            utils.dialog({
                title: ' title',
                width: 600,
                height: 400,
                content: $("#dialog"),
                okValue: '保存',
                cancelValue: '取消',
                resetForm: true,
                onshow: function () {
                    $(this.node).find('.ui-dialog-content').css({"overflow-y": 'scroll'});

                    /**
                     *  除表单元素之外，其他元素需要回显值时，需按以下规则处理:
                     *      1.必须要有name属性;
                     *      2.多个DOM具有相同name属性时,DOM的类型(nodeName)需一致;
                     *      3.多个DOM具有相同name属性时,回显json的属性顺序,需与name文档流顺序一致;
                     */
                    var obj = {
                        "statictxt": "非表单元素赋值" + new Date().getTime()
                    };

                    var serializeJSON = $.extend({}, gotSerializeObj, obj);

                    //json对象回显数据到form表单
                    $("#form").serializeJSONToForm(serializeJSON);
                },
                ok: function () {
                    //保存按钮回调

                    /**
                     *  form表单序列化成json
                     * {
                     *   name:value,
                     *   name:[value,value]
                     * }
                     */
                    gotSerializeObj = $("#form").serializeFormToJSON();
                },
                cancel: function () {
                },
                onclose: function () {
                },
            }).showModal();
        });


        //checkbox单选,模拟radio
        $("input[type=checkbox][name=workDaily]").on("click", function () {
            $("input[type=checkbox][name=" + this.name + "][value!=" + this.value + "]").prop("checked", false);
        });


    })
</script>
</html>